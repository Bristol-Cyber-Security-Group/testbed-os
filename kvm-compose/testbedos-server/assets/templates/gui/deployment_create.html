{% extends "gui/base.html" %}


{% block title %}{{ page_name }}{% endblock title %}


{% block head %}
{{ super() }}
<script type='text/javascript' src="http://localhost:3355/assets/scripts/create_deployment.js?{{ testbed_project_version }}"></script>

{% endblock head %}

{% block content %}

<!--modal popup when create deployment success-->
<div class="modal fade" id="deploymentCreateSuccessModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Deployment Create</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="deploymentCreateSuccessModalText">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a href="#" class="btn btn-primary" tabindex="-1" role="button" id="deploymentCreateSuccessModalLink">View</a>
            </div>
        </div>
    </div>
</div>


<div class="d-flex flex-column ">

    <br>
    <div class="callout callout-info">
    This is the deployment creation page.
    You will need to specify a unique project name and a yaml file to start this process.
    The project name and yaml file can be validated with the respective buttons below the text input boxes.
    Once the deployment has been created, you can navigate to the deployment folder and add other supporting files and/or edit the existing yaml.
    <br>
    <br>
    Note that the deployment folder with the yaml file will be created in the testbed user's home folder as defined in the testbed configuration host.json.
    The path to this folder is <span style="color:blue">/home/{{ testbed_user }}/.local/share/testbedos/deployments/</span>
    </div>

    <br>
    Choose a name for project
    <textarea id="projectNameText"></textarea>

    <br>

    <div class="d-flex justify-content-center">
        <span class="badge text-bg-secondary" id="projectValidationBadge">Unvalidated Deployment Name</span>

        <button class="btn btn-secondary" type="button" id="validateProjectNameButton">
            Validate Deployment Name
        </button>
    </div>

    <br>
    Insert a yaml
    <textarea id="projectYamlText" rows="20"></textarea>

    <br>

    <div class="d-flex justify-content-center">
        <span class="badge text-bg-secondary" id="yamlValidationBadge">Unvalidated Yaml</span>

        <button class="btn btn-secondary" type="button" id="validateYamlButton">
            Validate Yaml
        </button>
    </div>

    <br>
    <div class="d-flex justify-content-center">
        <button class="btn btn-primary" type="button" id="createDeploymentButton">
        Create Deployment
        </button>
    </div>

</div>

{% endblock content %}
